# TIL 230313(월)

- 비동기 처리(promise & async/await)
    - promise에 resolve가 없으면 promise가 끝나지 않아서 다음 코드가 동작하지 않음
        ```javascript
        // 잘못된 코드
        function timer1(){
            return new Promise(()=>{
                setTimeout(() => {
                console.log("1...");
                }, 1000);
            })
        }
        function timer2(){
            return new Promise(()=>{
                setTimeout(() => {
                console.log("2...");
                }, 2000);
            })
        }
        function timer3(){
            return new Promise(()=>{
                setTimeout(() => {
                console.log("3...");
                }, 3000);
            })
        }
        async function timers(){
            await timer3();
            await timer2();
            await timer1();
        }
        timers();
        ```
        이렇게 작성하면 timer3가 끝나지 않아서 timer2부터는 동작하지 않음
        ```javascript
        // 고친 코드
        function timer1(){
            return new Promise((resolve, reject) =>{
                setTimeout(() => {
                console.log("1...");
                resolve();
                }, 1000);
            })
        }
        function timer2(){
            return new Promise((resolve, reject) =>{
                setTimeout(() => {
                console.log("2...");
                resolve();
                }, 2000);
            })
        }
        function timer3(){
            return new Promise((resolve, reject) =>{
                setTimeout(() => {
                console.log("3...");
                resolve();
                }, 3000);
            })
        }
        async function timers(){
            await timer3();
            await timer2();
            await timer1();
        }
        timers();
        ```
        이렇게 promise의 동작이 끝나면 resolve를 넣어줘야 함
        > 관련 stackoverflow 질문   
        https://stackoverflow.com/questions/75717444/i-want-to-use-javascript-async-await
    - promise를 리턴하는 async 함수 뿐만 아니라 함수 안에서 promise를 실행하는 함수도 await처리를 하면 함수 안의 내용이 실행될 때까지 기다렸다가 넘어감
        ```javascript
        async function delay(s){
            await new Promise((resolve, reject)=>{
                setTimeout(() => {
                    console.log("1초가 지났습니다.");
                    resolve();
                }, s*1000);
            })
        }
        async function time(){
            console.log("1");
            await delay(1);
            console.log("2");
        }
        time();
        /*
        콘솔창 결과
        
        1
        (1초 지남)
        1초가 지났습니다.
        2
        ```