# TIL 230329 (수)

- react custom hooks이란?
    - 재사용 가능한 로직을 갖는 함수
    
    - 다른 일반 함수들과 달리 custom hook 내부에서는 react hook을 사용할 수 있음 (react hook은 함수형 컴포넌트와 custom hook의 내부에서만 사용 가능함)
    
    - custom hook 내부에 작성된 react hook은 각 컴포넌트 별로 독립적으로 동작함. 즉, 각 컴포넌트끼리 custom hook의 로직만 공유하고 실제 state는 공유하지 않음

    - custom hook의 이름 앞에는 반드시 'use'를 붙여야 함. 그래야 react가 custom hook으로 인식함
    
    - 컴포넌트에게 노출하기 위한 값들은 custom hook의 return값으로 작성함
       
- React custom hook 만들어서 스크롤 애니매이션 구현하기 (scroll 시 fadein되는 효과)
    ```javascript
    import { useRef, useEffect, useCallback } from "react";

    const useScrollFadeIn = (direction = "up", duration = 1, delay = 0) => {
    const dom = useRef();

    const handleDirection = (name) => {
        switch (name) {
        case "up":
            return "translate3d(0, 50%, 0)";
        case "down":
            return "translate3d(0, -50%, 0)";
        case "left":
            return "translate3d(50%, 0, 0)";
        case "right":
            return "translate3d(-50%, 0, 0)";
        default:
            return;
        }
    };

    const handleScroll = useCallback(
        ([entry]) => {
        const { current } = dom;
        if (entry.isIntersecting) {
            current.style.transitionProperty = "all";
            current.style.transitionDuration = `${duration}s`;
            current.style.transitionTimingFunction = "cubic-bezier(0, 0, 0.2, 1)";
            current.style.transitionDelay = `${delay}s`;
            current.style.opacity = 1;
            current.style.transform = "translate3d(0, 0, 0)";
        }
        },
        [delay, duration]
    );

    useEffect(() => {
        let observer;
        const { current } = dom;

        if (current) {
        observer = new IntersectionObserver(handleScroll, { threshold: 0.1 });
        observer.observe(current);
        }

        return () => observer && observer.disconnect();
    }, [handleScroll]);

    return {
        ref: dom,
        style: {
        opacity: 0,
        transform: handleDirection(direction),
        },
    };
    };

    export default useScrollFadeIn;
    ```


---
## 출처
- (react custom hooks) https://velog.io/@kim98111/Custom-Hooks
- (scroll animation) https://shylog.com/react-custom-hooks-scroll-animation-fadein/